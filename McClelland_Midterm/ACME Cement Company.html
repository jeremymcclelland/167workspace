<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">	
<link rel="stylesheet" href="style.css">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>ACME Cement Company</title>
	<meta name="Jeremy McClelland" content="ACME Cement Comany Quote Gen" />
	<!-- Date: 2014-08-29 -->
</head>
<body>
	
	<h1>ACME Cement Company<br/>
Quote Generator</h1>
	<p class="lead"><em>"Ac me no questions, and I'll sell you no lye!"</em></p>
	
	
	
<script type="text/javascript">
//FILE  :  ACME Cement Company.html
//PROG  :  Jeremy McClelland
//PURP  : Calculate discount price for bulk concrete and generates quote/invoice


//Define variables
var userFirstName = "";
var poundsConcrete = 0;
var reductionRate = 0;
var discount = 0.0;
var totalCostBeforeDiscount = 0.0;
var totalCostAfterDiscount = 0.0;
var dollarsSaved = 0.0;
//Constant

var basePrice = 1.13;
var BREAK = "<br/>";

//beginning program


document.write ("Thank you for using the ACME Cement Quote Generator." + BREAK);
document.write ("Do you mind my asking what your name is?" + BREAK + BREAK);
userFirstName = prompt("What is your first name?", "");
document.write ("OK, " + userFirstName + ", we'll need some information to build the quote." + BREAK + 
"Please input things when you are prompted. Most figures will be simple whole numbers." + BREAK + 
"Please don't use any commas in the numbers you input." + BREAK  + BREAK);



var discountCalculator = function()
  {
	
	
while (poundsConcrete <= 0 || isNaN(poundsConcrete)) 
	{	
     poundsConcrete = prompt("Please enter the number in pounds of concrete you would like to purchase (please use whole numbers and no commas)", 0);
	 if (poundsConcrete > 0 && poundsConcrete <= 500){
	 	reductionRate = 2;
	 	discount = .02;
	 } else if (poundsConcrete > 500 && poundsConcrete <= 9000){
		reductionRate = 4;
		discount = .04;
	 } else if (poundsConcrete >9000 && poundsConcrete <= 15000){
		reductionRate = 5;
		discount = .05;
	 } else if (poundsConcrete > 15000){
		reductionRate = 9;
		discount = .09;
	 } else {
	 	alert ("sorry, that is not a valid input");
	 }
	 
 }
};	




discountCalculator();

totalCostBeforeDiscount = poundsConcrete * basePrice;
totalCostAfterDiscount = totalCostBeforeDiscount * (1 - discount);
dollarsSaved = totalCostBeforeDiscount - totalCostAfterDiscount;

//formatting numbers to 2 decimal places and adding commas
totalCostBeforeDiscount = totalCostBeforeDiscount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
totalCostAfterDiscount = totalCostAfterDiscount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
dollarsSaved = dollarsSaved.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
poundsConcrete = poundsConcrete.replace(/\B(?=(\d{3})+(?!\d))/g, ",");



/*document.write(
	"<table class='table'><tr><th>Invoice</th><th></th></tr>" +
	"<tr><td>Pounds of Concrete</td><td>" + poundsConcrete + "</td></tr>" +
    "<tr><td>Discount</td><td>" + reductionRate + "%</td></tr>" +
    "<tr><td>Total Before Discount</td><td>$" + totalCostBeforeDiscount + "</td></tr>" +
    "<tr><td>Total After Discount</td><td>$" + totalCostAfterDiscount + "</td></tr>" +
    "<tr><td>Savings</td><td>$" + dollarsSaved + "</td></tr>" +
    "</table>"	
);*/



document.write("<p>Thanks you, " + userFirstName + ". Please press the button below to see invoice.</p>");




</script>

<!-- Large modal -->
<button class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Invoice</button>

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

<script>
document.write(
	"<table class='table'><tr><th>Invoice</th><th></th></tr>" +
	"<tr><td>Pounds of Concrete</td><td>" + poundsConcrete + " lbs</td></tr>" +
    "<tr><td>Discount</td><td>" + reductionRate + "%</td></tr>" +
    "<tr><td>Total Before Discount</td><td>$" + totalCostBeforeDiscount + "</td></tr>" +
    "<tr><td>Total After Discount</td><td>$" + totalCostAfterDiscount + "</td></tr>" +
    "<tr><td>Savings</td><td>$" + dollarsSaved + "</td></tr>" +
    "</table>"	
);

</script>

     


    </div>
  </div>
</div>

 <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</body>
</html>

